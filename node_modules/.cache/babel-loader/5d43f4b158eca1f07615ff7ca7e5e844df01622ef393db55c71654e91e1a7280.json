{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { createOrder, fetchAllOrders, updateOrder } from \"../services/orderService\";\nexport const createOrderAsync = createAsyncThunk('order/createOrder', async order => {\n  const response = await createOrder(order);\n  // The value we return becomes the `fulfilled` action payload\n  return response.data;\n});\nexport const updateOrderAsync = createAsyncThunk('order/updateOrder', async order => {\n  const response = await updateOrder(order);\n  // The value we return becomes the `fulfilled` action payload\n  return response.data;\n});\nexport const fetchAllOrdersAsync = createAsyncThunk('order/fetchAllOrders', async ({\n  sort,\n  pagination\n}) => {\n  const response = await fetchAllOrders(sort, pagination);\n  // The value we return becomes the `fulfilled` action payload\n  return response.data;\n});\nexport const orderSlice = createSlice({\n  name: \"order\",\n  initialState: {\n    orders: [],\n    status: 'idle',\n    currentOrder: null,\n    totalOrders: 0\n  },\n  reducers: {\n    resetOrder: state => {\n      state.currentOrder = null;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(createOrderAsync.pending, state => {\n      state.status = 'loading';\n    }).addCase(createOrderAsync.fulfilled, (state, action) => {\n      state.status = 'idle';\n      state.orders.push(action.payload.data);\n      state.currentOrder = action.payload.data;\n    }).addCase(createOrderAsync.rejected, state => {});\n    builder.addCase(updateOrderAsync.pending, state => {\n      state.status = 'loading';\n    }).addCase(updateOrderAsync.fulfilled, (state, action) => {\n      state.status = 'idle';\n      const index = state.orders.findIndex(order => order.id === action.payload.data.id);\n      state.orders[index] = action.payload.data;\n    }).addCase(updateOrderAsync.rejected, state => {});\n    builder.addCase(fetchAllOrdersAsync.pending, state => {\n      state.status = 'loading';\n    }).addCase(fetchAllOrdersAsync.fulfilled, (state, action) => {\n      state.status = 'idle';\n      state.orders = action.payload.data.orders;\n      state.totalOrders = action.payload.data.totalOrders;\n    }).addCase(fetchAllOrdersAsync.rejected, state => {});\n  }\n});\nexport const {\n  resetOrder\n} = orderSlice.actions;\nexport default orderSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","createOrder","fetchAllOrders","updateOrder","createOrderAsync","order","response","data","updateOrderAsync","fetchAllOrdersAsync","sort","pagination","orderSlice","name","initialState","orders","status","currentOrder","totalOrders","reducers","resetOrder","state","extraReducers","builder","addCase","pending","fulfilled","action","push","payload","rejected","index","findIndex","id","actions","reducer"],"sources":["/home/bharat/myprojects/myecommerce-app/react-ecommerce/src/redux/orderSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { createOrder, fetchAllOrders, updateOrder } from \"../services/orderService\";\n\nexport const createOrderAsync = createAsyncThunk(\n    'order/createOrder',\n    async (order) => {\n      const response = await createOrder(order);\n      // The value we return becomes the `fulfilled` action payload\n      return response.data;\n    }\n);\nexport const updateOrderAsync = createAsyncThunk(\n    'order/updateOrder',\n    async (order) => {\n      const response = await updateOrder(order);\n      // The value we return becomes the `fulfilled` action payload\n      return response.data;\n    }\n);\n  \nexport const fetchAllOrdersAsync = createAsyncThunk(\n    'order/fetchAllOrders',\n    async ({sort, pagination}) => {\n      const response = await fetchAllOrders(sort,pagination);\n      // The value we return becomes the `fulfilled` action payload\n      return response.data;\n    }\n);\n\nexport const orderSlice=createSlice({\n    name:\"order\",\n    initialState:{\n        orders: [],\n        status: 'idle',\n        currentOrder: null,\n        totalOrders: 0\n    },\n    reducers:{\n        resetOrder: (state) => {\n            state.currentOrder = null;\n        },\n    },\n    extraReducers:(builder)=>{\n        builder.addCase(createOrderAsync.pending, (state) => {\n            state.status = 'loading';\n         })\n        .addCase(createOrderAsync.fulfilled, (state,action) => {\n            state.status = 'idle';\n            state.orders.push(action.payload.data);\n            state.currentOrder = action.payload.data;\n         })\n        .addCase(createOrderAsync.rejected, (state) => { })\n\n        builder.addCase(updateOrderAsync.pending, (state) => { \n            state.status = 'loading';\n        })\n        .addCase(updateOrderAsync.fulfilled, (state,action) => {\n            state.status = 'idle';\n            const index =  state.orders.findIndex(order=>order.id===action.payload.data.id)\n            state.orders[index] = action.payload.data;\n         })\n        .addCase(updateOrderAsync.rejected, (state) => { })\n\n        builder.addCase(fetchAllOrdersAsync.pending, (state) => { \n            state.status = 'loading';\n        })\n        .addCase(fetchAllOrdersAsync.fulfilled, (state,action) => {\n            state.status = 'idle';\n            state.orders = action.payload.data.orders;\n            state.totalOrders = action.payload.data.totalOrders;\n         })\n        .addCase(fetchAllOrdersAsync.rejected, (state) => { })\n    }\n\n});\n\nexport const { resetOrder } = orderSlice.actions;\nexport default orderSlice.reducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}